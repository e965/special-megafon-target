<!DOCTYPE html>
<html lang="ru">

<head>
  <title>Megafon Target Special</title>

  <meta charset="utf-8">
  <meta name="referrer" content="always">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Подключаем основной шрифт сайта на случай, если спецпроект будет не на отдельной странице -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,700&amp;subset=cyrillic-ext">

  <!--
    Подключаем стили сайта на тот же случай
    ВАЖНО: в стилях сайта ПОЧТИ для всех элементов свойство box-sizing определено как border-box
  -->
  <link rel="stylesheet" href="https://static-osnova.gcdn.co/static/build/vc.ru/all.min.css">

  <style>
    html, body, body > .wrapper {
      width: 100%; height: 100%;
    }

    body > .wrapper {
      display: grid;
      grid-template-columns: 1fr;
      grid-template-rows: 50px 1fr;

      overflow: hidden;
    }

    body > .wrapper > header {
      background-color: #feebef;
      padding: 15px
    }

    body > .wrapper > main {
      display: flex;
      justify-content: center;
      align-items: center;

      padding: 10px 0;
    }

    #cmtt-special {
      box-shadow: 0 0 4px rgba(0, 0, 0, .2);
    }
  </style>
</head>

<body>

  <div class="wrapper">
    <header>
      <label class="toggle" for="feed-toggle">
        <input type="checkbox" id="feed-toggle">
        feed
      </label>
    </header>
    <main>
      <div id="cmtt-special" class="mgfn-trgt"></div>
    </main>
  </div>

  <script>
    (function(d, ver) {
      var s = d.createElement('script');
      s.src = './all.js?' + ver;
      s.async = true;

      var container = d.getElementById('cmtt-special');

      if (container) {
        s.onload = function() {
          new MegafonTarget.Special({
            css: './all.css?' + ver,
            container: container,
            isFeed: document.querySelector('[air-module="module.feed"], [air-module="module.page_search"]') ? true : false,
            share: {
              url: '',
              title: '',
            }
          });
        };
      }
      d.body.appendChild(s);
    })(document, 0);

    (function(d, w) {
      var toggle = d.getElementById('feed-toggle');
      var wrapper = d.getElementById('wrapper');
      var specialContainer = d.getElementById('cmtt-special');

      toggle.addEventListener('change', function () {
        if (this.checked) {
          specialContainer.dataset.isFeed = ''
        } else {
          delete specialContainer.dataset.isFeed
        }
      });
    })(document, window);
  </script>

</body>

</html>
